"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4097],{54097:function(e,r,i){i.d(r,{mR:function(){return R},_L:function(){return U},B1:function(){return B},te:function(){return X},Hc:function(){return M},Qb:function(){return k},Em:function(){return q},GD:function(){return c},Zr:function(){return en},cL:function(){return et},if:function(){return ec}});var s=i(52322),n=i(71095),a=i(16298),l=i(40991),t=i(31398);let o=e=>{let{items:r,hasNextPage:i,fetchNextPage:o,isFetchingNextPage:c}=e,{t:d}=(0,a.YB)();return(0,s.jsxs)(n.W20,{maxW:"https://lootex.io/_next/static/chunks/container.2xl",pt:{base:"2em",md:"4em"},children:[(0,s.jsx)(n.X6q,{as:"h3",mb:"1",children:d("LT0334","My Collections")}),(0,s.jsx)(n.xvT,{mb:"6",fontSize:"lg",children:d("LT0444","Curate, and manage my collections")}),(0,s.jsx)(l.Qj,{href:"/account/collections/import",variant:"solid",colorScheme:"primary",mb:"10",size:"lg",children:d("LT0410","Import an Existing")}),(0,s.jsx)(n.MIq,{columns:[1,2,3,4],spacing:{base:"2",md:"4"},children:r.map((e,r)=>(0,s.jsx)(t.zt,{...e},r))}),i&&(0,s.jsx)(n.zxk,{onClick:()=>o(),isLoading:c,alignSelf:"center",colorScheme:"mono",size:"lg",children:d("LT0255","Load More")})]})};var c=o,d=i(5632),u=i(41578),m=i(2784),h=i(24988);let x=e=>{if(Array.isArray(e)&&(null==e?void 0:e.length)>0){let r=e.find(e=>"facebook"===e.name);if(r)return e;{let r=[...e];return r.splice(-1,0,{name:"facebook",placeholder:"https://www.facebook.com/",iconName:"Facebook",url:""}),r}}return h.V$},g=e=>{let{children:r,...i}=e,[n,a]=(0,m.useState)(null),{data:l,isSuccess:o}=i;return(0,m.useEffect)(()=>{if(o){let{name:e,description:r,externalLinks:i,bannerImageUrl:s,logoImageUrl:n,featuredImageUrl:t,creatorFee:o,officialAddress:c}=l,d=x(i);a({bannerImageUrl:s||"",logoImageUrl:n||"",featuredImageUrl:t||"",name:e||"",description:r||"",socialLinks:d,creatorFee:+o||0,officialAddress:c||""})}},[l,o]),n?r({defaultValues:n,...i}):(0,s.jsx)(t.gb,{})};var p=i(6812),f=i(58105),j=i(63955),v=i(24511),L=i(62350),b=i(76122),T=i(27742);let y=(e,r)=>{switch(e){case"bannerImageUrl":return()=>(0,b.od)(r);case"logoImageUrl":return()=>(0,b.cK)(r);case"featuredImageUrl":return()=>(0,b.SV)(r);default:return null}},C=e=>{var r;let{collection:i,form:t,type:o,formLabel:c,tooltipLabel:d,uploaderProps:u,...h}=e,[x,g]=(0,m.useState)(null),{errorPopup:p}=(0,T.Ol)(),{toast:f}=(0,n.lmA)(),{formatYupErrorMessage:v}=(0,a.YB)(),{control:b,formState:{errors:C},setValue:I}=t,{mutate:w,data:S,isLoading:k}=(0,L.D)({mutationFn:y(o,x),onSuccess:e=>{I(o,e.url)},onError:e=>p(e)}),E=e=>g(e[0]);return(0,m.useEffect)(()=>{x&&w()},[x,w]),(0,s.jsxs)(n.NIc,{isInvalid:C[o],...h,children:[(0,s.jsxs)(n.Ugi,{spacing:"0",mb:"2",children:[(0,s.jsx)(n.lXp,{mr:"1",mb:"0",children:c}),(0,s.jsx)(l.MC,{label:d})]}),(0,s.jsx)(j.Qr,{name:o,control:b,render:e=>{let{field:{name:r,ref:n}}=e;return(0,s.jsx)(l.bA,{ref:n,alt:r,name:r,src:(null==S?void 0:S.url)||(null==i?void 0:i[o])||"",dropzoneOptions:{multiple:!1},isLoading:k,onChange:E,onError:e=>f({status:"error",title:e}),minW:"auto",...u})}}),(0,s.jsx)(n.J1D,{children:v(null===(r=C[o])||void 0===r?void 0:r.message)})]})},I=e=>{let{collection:r,form:i,...l}=e,{t:o}=(0,a.YB)(),{watch:c}=i;return(0,s.jsxs)(n.kCb,{direction:"column",gap:"2",flex:{md:"1"},...l,children:[(0,s.jsx)(n.xvT,{fontWeight:"bold",color:"text.primary",children:o("LT0328","Preview")}),(0,s.jsx)(n.xuv,{w:"full",maxW:"20.75rem",alignSelf:{base:"center",lg:"flex-start"},children:(0,s.jsx)(t.zt,{...r,name:c("name"),description:c("description"),bannerImageUrl:c("bannerImageUrl"),logoImageUrl:c("logoImageUrl"),featuredImageUrl:c("featuredImageUrl"),isPreview:!0})})]})},w=e=>{var r,i,t,o;let{defaultValues:c,...m}=e,{toast:h,popup:x}=(0,n.lmA)(),{formatYupErrorMessage:g,t:L}=(0,a.YB)(),b=(0,d.useRouter)(),{data:T}=m,y="/collections/".concat(T.slug),w=(0,v.Ry)({name:(0,v.Z_)().required(),description:(0,v.Z_)().max(1e3),socialLinks:(0,v.IX)().of((0,v.Ry)().shape({url:(0,v.Z_)().url()})),creatorFee:(0,v.Rx)().typeError().min(0).max(10),officialAddress:(0,v.Z_)().test("address",L("LT0641","Invalid address"),e=>!e||(0,f.isAddress)(e))}).required(),S=(0,j.cI)({resolver:(0,p.X)(w),defaultValues:c,mode:"onBlur",reValidateMode:"onBlur"}),{register:k,handleSubmit:E,formState:{errors:q},control:W,watch:z}=S,{fields:A}=(0,j.Dq)({name:"socialLinks",control:W}),R=e=>{let r=q.socialLinks&&q.socialLinks[e];return null==r?void 0:r.url.message},D=z(),P=()=>{x({status:"success",title:L("LT0718","Collection updated!"),description:L("LT0719","Click View Collection button to go to the {collection_name} page, or Keep Editing to stay on this page.",{collection_name:D.name}),isClosable:!0,actions:[{children:L("LT0717","Keep Editing"),onClick:()=>{},colorScheme:"neutral",variant:"outline"},{children:L("LT0720","View Collection"),onClick:()=>b.push(y),colorScheme:"primary"}]})},U=e=>h({status:"error",title:L("LT0632","Failed to update. Please try again later."),description:e.message}),{updateCollection:_,isLoading:F}=(0,u.vU)({slug:T.slug,data:D,onSuccess:P,onError:U}),M=0===Object.keys(q).length&&""!==D.name;return(0,s.jsxs)(n.W20,{as:"form",maxW:"https://lootex.io/_next/static/chunks/container.lg",my:{base:"4",md:"16"},px:{base:"4",lg:"8"},onSubmit:E(_),noValidate:!0,children:[(0,s.jsxs)(n.kCb,{justify:"space-between",align:{base:"flex-start",md:"center"},gap:"2",mb:{base:"5",md:"8"},children:[(0,s.jsx)(n.X6q,{as:"h2",flex:"1",children:L("LT0442","Edit My Collections")}),(0,s.jsx)(n.zxk,{size:{base:"sm",md:"md"},onClick:()=>{x({status:"warning",title:L("LT0714","You have unsaved changes"),description:L("LT0715","Are you sure you want to leave? Your changes wonâ€™t be saved."),isClosable:!0,actions:[{children:L("LT0716","Discard Changes"),onClick:()=>b.push(y),colorScheme:"neutral",variant:"outline"},{children:L("LT0717","Keep Editing"),onClick:()=>{},colorScheme:"primary"}]})},children:L("LT0712","Go to Collection")})]}),(0,s.jsxs)(n.kCb,{direction:{base:"column",md:"row"},gap:"8",children:[(0,s.jsxs)(n.gCW,{spacing:"8",alignItems:"stretch",flex:"2",children:[(0,s.jsxs)(n.kCb,{direction:{base:"column",lg:"row"},gap:"8",children:[(0,s.jsxs)(n.kCb,{direction:"column",gap:"8",flex:"1",children:[(0,s.jsxs)(n.kCb,{alignItems:"flex-start",gap:"4",children:[(0,s.jsx)(C,{collection:T,form:S,type:"logoImageUrl",formLabel:L("LT0266","Logo Image"),tooltipLabel:L("LT0486","This image will also be used for navigation. 320 x 320 recommended"),uploaderProps:{ratio:1},flex:"1"}),(0,s.jsx)(C,{collection:T,form:S,type:"featuredImageUrl",formLabel:L("LT0694","Featured image"),tooltipLabel:L("LT0695","This image will be used for {type} card display. 360 x 240 recommended",{type:"collection"}),uploaderProps:{ratio:1.5},flex:"1.5"})]}),(0,s.jsx)(C,{collection:T,form:S,type:"bannerImageUrl",formLabel:L("LT0417","Banner Image"),tooltipLabel:L("LT0485","This image will be used for featuring your collection on the homepage, category pages, or other promotional areas of Lootex. 1536*384 recommended."),uploaderProps:{minH:"https://lootex.io/_next/static/chunks/11.5rem",maxH:{base:"https://lootex.io/_next/static/chunks/11.5rem",md:"auto"}}})]}),(0,s.jsx)(I,{collection:T,form:S,display:{base:"flex",md:"none"}})]}),(0,s.jsx)(l.Wi,{label:L("LT0270","Collection name"),isInvalid:q.name,errorMessage:g(null===(r=q.name)||void 0===r?void 0:r.message,{path:L("LT0270","Collection name")}),isRequired:!0,children:(0,s.jsx)(n.IIB,{type:"text",placeholder:L("LT0661","Enter collection name"),...k("name")})}),(0,s.jsx)(l.Wi,{label:L("LT0037","Description"),helperText:L("LT0652","{word_amount} of {max} characters used",{word_amount:D.description.length,max:1e3}),isInvalid:q.description,errorMessage:g(null===(i=q.description)||void 0===i?void 0:i.message,{path:L("LT0037","Description")}),children:(0,s.jsx)(n.gxH,{...k("description")})}),(0,s.jsxs)(n.gCW,{w:"full",align:"start",children:[(0,s.jsx)(n.lXp,{mx:"0",children:L("LT0406","Links")}),A.map((e,r)=>(0,s.jsx)(l.XI,{name:"socialLinks[".concat(r,"https://lootex.io/_next/static/chunks/].name"),iconName:e.iconName,placeholder:e.placeholder,isInvalid:R(r),errorMessage:g(R(r),{path:L("LT0654","Link")}),...k("socialLinks[".concat(r,"https://lootex.io/_next/static/chunks/].url"))},e.id))]}),(0,s.jsx)(l.Wi,{label:L("LT0361","Creator Earnings"),helperText:L("LT0387","Creator earnings for a collection are set between 0 and 10%."),isInvalid:q.creatorFee,errorMessage:g(null===(t=q.creatorFee)||void 0===t?void 0:t.message,{path:L("LT0361","Creator Earnings")}),children:(0,s.jsxs)(n.BZy,{children:[(0,s.jsx)(n.Y2U,{min:0,flex:"1",precision:1,children:(0,s.jsx)(n.zuI,{...k("creatorFee")})}),(0,s.jsx)(n.xHT,{children:(0,s.jsx)(n.PJP.Percentage,{})})]})}),(0,s.jsx)(l.Wi,{label:L("LT0733","Official Wallet (optional)"),helperText:L("LT0734","Listing items from this wallet address will show up in the Official Sale tab"),isInvalid:q.officialAddress,errorMessage:g(null===(o=q.officialAddress)||void 0===o?void 0:o.message),children:(0,s.jsx)(n.IIB,{type:"text",placeholder:L("LT0735","Please input official sale address."),...k("officialAddress")})}),(0,s.jsx)(n.zxk,{type:"submit",size:"lg",w:{base:"full",md:"max-content"},colorScheme:"primary",isDisabled:!M,isLoading:F,children:L("LT0228","Save Changes")})]}),(0,s.jsx)(I,{collection:T,form:S,display:{base:"none",md:"flex"},position:"sticky",top:"80px",zIndex:"1",h:{md:"calc(100vh - 80px)"}})]})]})},S=()=>{let e=(0,d.useRouter)(),{query:r}=e,i=(0,u.YD)({slug:null==r?void 0:r.slug}),{hasPermission:n}=(0,u.vU)({slug:null==r?void 0:r.slug}),{isLoading:a}=i;return(0,s.jsx)(s.Fragment,{children:a?(0,s.jsx)(t.gb,{}):n?(0,s.jsx)(g,{...i,children:e=>(0,s.jsx)(w,{...e})}):(0,s.jsx)(t.Tg,{})})};var k=S;let E=()=>{var e;let{options:r,currentOption:i,setCurrentOption:l}=(0,T.S_)({}),{formatYupErrorMessage:t,t:o}=(0,a.YB)(),c=(0,d.useRouter)(),{errorPopup:u}=(0,T.Ol)(),m=(0,v.Ry)({contractAddress:(0,v.Z_)().required().test("validateAddress",o("LT0641","Invalid address"),e=>(0,f.isAddress)(e))}).required(),{handleSubmit:h,formState:{errors:x,isValid:g},register:y,getValues:C}=(0,j.cI)({resolver:(0,p.X)(m)}),{mutate:I,isLoading:w}=(0,L.D)(()=>(0,b.An)({chainShortName:i.value,contractAddress:C("contractAddress")}),{onSuccess:async e=>{let{slug:r}=e;try{await (0,b.Fr)("".concat(i.value,"/").concat(C("contractAddress")))}catch(e){console.error(e)}c.push("/collections/".concat(r))},onError:e=>{u(e)}});return(0,s.jsxs)(n.W20,{maxW:"https://lootex.io/_next/static/chunks/container.lg",my:{base:"8",md:"16"},children:[(0,s.jsx)(n.X6q,{as:"h3",mb:"2",children:o("LT0435","Enter your contract address")}),(0,s.jsx)(n.xvT,{fontSize:{base:"sm",md:"md"},mb:"6",children:o("LT0289","What is the address of your ERC721 or ERC1155 contract on the Mainnet Network?")}),(0,s.jsxs)("form",{onSubmit:h(I),children:[(0,s.jsxs)(n.kCb,{direction:{base:"column",md:"row"},gap:"4",mb:"8",children:[(0,s.jsx)(T.pC,{options:r,value:i,onChange:l,menuButtonProps:{flex:{md:"1"},maxW:{md:"60"}}}),(0,s.jsxs)(n.NIc,{flex:"1",isInvalid:x.contractAddress,children:[(0,s.jsx)(n.IIB,{autoFocus:!0,type:"text",placeholder:o("LT0355","Enter your collection address"),...y("contractAddress")}),(0,s.jsx)(n.J1D,{children:t(null===(e=x.contractAddress)||void 0===e?void 0:e.message)})]})]}),(0,s.jsx)(n.zxk,{type:"submit",size:"lg",colorScheme:"primary",isLoading:w,isDisabled:!g,children:o("LT0235","Submit")})]})]})};var q=E,W=i(30315),z=i(29077);let A=e=>{let{account:r,walletAddress:i}=e,{data:{count:o}={},isLoading:c}=(0,z.Zs)({username:null==r?void 0:r.username}),d=(0,T.wX)(["profile","store","inventory","featured-items","media","activity","followed-games","favorited-collections","favorited-items"],{preservedQueryKeys:["usernameOrAddress"]}),{t:u}=(0,a.YB)(),{address:m}=(0,W.mA)(),h=(0,z.Sx)(r,m),{featuredAssetsQuery:x,updateMutation:g}=(0,z.re)(null==r?void 0:r.username),p=(0,z.L$)(null==r?void 0:r.username);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.gF,{account:r,walletAddress:i}),r?(0,s.jsx)(n.W20,{maxW:"https://lootex.io/_next/static/chunks/container.2xl",mt:6,px:{base:4,md:8},children:(0,s.jsxs)(l.l8,{...d,isLazy:!0,children:[(0,s.jsx)(l.i1,{title:u("LT0006","Profile"),children:(0,s.jsx)(t.NZ,{account:r,...d,...p,featuredAssetsQuery:x,tab:u("LT0006","Profile")})}),(0,s.jsx)(l.i1,{title:u("LT0007","Store"),children:(0,s.jsx)(t.kC,{params:{username:r.username,orderStatus:["listing"]},isFilterEnabled:!0,isLoadMoreEnabled:!0,isChainFilterEnabled:!0,isMyItems:!0,username:r.username,wallets:r.wallets})}),(0,s.jsx)(l.i1,{title:(0,s.jsxs)(s.Fragment,{children:[u("LT0008","Inventory"),(0,s.jsx)(n.Vp9,{size:"xs",colorScheme:"mono",children:c?"-":o})]}),children:(0,s.jsx)(t.kC,{params:{username:r.username},isFilterEnabled:!0,isLoadMoreEnabled:!0,isChainFilterEnabled:!0,isMyItems:!0,username:r.username,wallets:r.wallets})}),(0,s.jsx)(l.i1,{title:u("LT0009","Featured Items"),children:(0,s.jsx)(t.y2,{assetsQueryParams:{isMe:!0,username:r.username},featuredAssetsQuery:x,updateMutation:g,isEditEnabled:h,renderItem:e=>(0,s.jsx)(t.Jf,{asset:e,isPreview:!0}),getItemId:e=>e.assetId,getThumbnailUrl:e=>e.assetImageUrl,getThumbnailTitle:e=>e.assetName,tab:u("LT0009","Featured Items")})}),(0,s.jsx)(l.i1,{title:u("LT0012","Media"),children:(0,s.jsx)(t.pU,{isOwner:h,...p,tab:u("LT0012","Media"),canEditGame:!0})}),(0,s.jsx)(l.i1,{title:u("LT0186","Activity"),children:(0,s.jsx)(t.Av,{userAddressOptions:null==r?void 0:r.wallets,isProfile:!0})}),(0,s.jsx)(l.i1,{title:u("LT0533","Followed Games"),children:(0,s.jsx)(t.cZ,{params:{username:r.username,limit:20},isOwner:h})}),(0,s.jsx)(l.i1,{title:u("LT0534","Favorited Collections"),children:(0,s.jsx)(t.mm,{params:{username:r.username,limit:20},isOwner:h,isLoadMoreEnabled:!0})}),(0,s.jsx)(l.i1,{title:u("LT0535","Favorited Items"),children:(0,s.jsx)(t.kC,{params:{isLiked:!0,username:r.username,limit:20},queryOptions:{staleTime:0},isFilterEnabled:!0,isLoadMoreEnabled:!0,isChainFilterEnabled:!0,username:r.username})})]})}):(0,s.jsx)(n.M5Y,{w:"full",my:"16",px:{base:"4",md:"8"},children:(0,s.jsxs)(n.gCW,{w:"full",maxW:"32rem",spacing:"6",children:[(0,s.jsx)(n.PJP.Image,{boxSize:"6rem",color:"border.primary"}),(0,s.jsx)(n.xvT,{textAlign:"center",children:u("LT0532","Uh-oh! It seems like this user hasn't signed up for a Lootex ID.")})]})})]})};var R=A,D=i(75783),P=i(48550),U=function(){var e;let r=(0,d.useRouter)(),{formatYupErrorMessage:i,t:l}=(0,a.YB)(),t=(0,v.Ry)({email:(0,v.Z_)().email().required()}).required(),{connector:o}=(0,W.mA)(),{errorPopup:c}=(0,T.Ol)(),{handleSubmit:u,formState:{errors:m,isValid:h},register:x,watch:g}=(0,j.cI)({resolver:(0,p.X)(t),defaultValues:async()=>{var e,r;let i=(null==o?void 0:o.name)==="Web3Auth"&&await (null===(e=null==o?void 0:null===(r=o.Web3AuthInstance)||void 0===r?void 0:r.getUserInfo())||void 0===e?void 0:e.email)||"";return{email:i}}}),f=g("email"),{checkEmail:L,isLoading:b}=(0,D.sf)({email:f,onSuccess:e=>{e?r.push({pathname:"/account/create-new-id",query:{email:f,referral:r.query.referral,redirect:r.query.redirect}}):r.push({pathname:"/account/verify-email",query:{email:f,redirect:r.query.redirect}})},onError:e=>{c(e)}}),y=()=>{L(),P.Kz.signUpEmail({email:f})};return(0,s.jsxs)(n.W20,{maxWidth:"https://lootex.io/_next/static/chunks/container.md",py:{base:8,md:12,lg:20},children:[(0,s.jsx)(n.X6q,{as:"h3",mb:"2",children:l("LT0370","Welcome to Lootex")}),(0,s.jsx)(n.xvT,{fontSize:"lg",mb:"8",children:l("LT0310","Find or Create your Lootex ID")}),r.isReady&&(0,s.jsxs)("form",{onSubmit:u(y),children:[(0,s.jsxs)(n.NIc,{isRequired:!0,isInvalid:m.email,mb:"8",children:[(0,s.jsx)(n.lXp,{children:l("LT0280","Email")}),(0,s.jsx)(n.IIB,{autoFocus:!0,type:"text",placeholder:l("LT0085","Enter your email"),...x("email")}),(0,s.jsx)(n.J1D,{children:i(null===(e=m.email)||void 0===e?void 0:e.message)})]}),(0,s.jsx)(n.zxk,{type:"submit",size:"lg",colorScheme:"primary",isDisabled:!h,isLoading:b,children:l("LT0385","Continue")})]})]})},_=i(62203);let F=()=>{var e,r,i,o;let{ref:c,reset:u}=(0,T.Z1)(),{formatYupErrorMessage:h,t:x}=(0,a.YB)(),g=(0,d.useRouter)(),{address:f,connector:L}=(0,W.mA)(),{setSignedIn:b,refetchAccount:y}=(0,D.aC)(),{errorPopup:C}=(0,T.Ol)(),I=(0,v.Ry)({email:(0,v.Z_)().email(),username:(0,v.Z_)().sequence([()=>(0,v.Z_)().label(x("LT0309","Username")).required().min(3).max(16),()=>(0,v.Z_)().matches(/^([a-z])/,x("LT0646","First character must be a lowercase letter(a-z)")),()=>(0,v.Z_)().matches(/^[a-z0-9_]+$/,x("LT0647","Username can only contains lowercase letters(a-z), numbers(0-9) and underscore(_)")),()=>(0,v.Z_)().availableUsername(x("LT0648","This username has already been registered"))]),referralCode:(0,v.Z_)().referralCode(x("LT0649","Invalid referral code")),agreeTerms:(0,v.O7)().required().oneOf([!0],x("LT0650","The terms and conditions must be accepted")),recaptcha:(0,v.Z_)().required()}).required(),w=(0,p.X)(I),{handleSubmit:S,formState:k,register:E,setValue:q,watch:z}=(0,j.cI)({resolver:w,mode:"onChange",defaultValues:async()=>{var e,r;let i=(null==L?void 0:L.name)==="Web3Auth"&&await (null===(e=null==L?void 0:null===(r=L.Web3AuthInstance)||void 0===r?void 0:r.getUserInfo())||void 0===e?void 0:e.email)||"";return{username:"",email:i}}}),{errors:A}=k,R=z("email"),P=z("username"),U=z("agreeTerms"),F=z("referralCode"),M=z("recaptcha"),O=E("username"),B=E("referralCode"),Z=(0,_.Z)(O.onChange),X=(0,_.Z)(B.onChange),{signUpTorus:N,isLoading:Y}=(0,D.s)({onSuccess:()=>{y(),b(!0);let e=g.query.redirect;e?g.push(e):g.push("/")},onError:e=>{u(),q("recaptcha",""),C(e)}}),J=e=>{q("recaptcha",e)},V=async()=>{var e,r;let i=await (null==L?void 0:null===(e=L.Web3AuthInstance)||void 0===e?void 0:e.getUserInfo());N({chainFamily:"ETH",provider:"TORUS_LIBRARY",transport:"Library",referralCode:F,address:f,isErc1271Wallet:null!=window&&null!==(r=window.ethereum)&&void 0!==r&&!!r.isBlocto,recaptcha:M,...i,username:P})},G=0===Object.keys(A).length&&""!==P&&U&&M;return(0,m.useEffect)(()=>{var e;g.isReady&&(null===(e=g.query)||void 0===e?void 0:e.referral)&&q("referralCode",g.query.referral)},[g.query,g.isReady]),(0,s.jsxs)(n.W20,{maxWidth:"https://lootex.io/_next/static/chunks/container.md",py:{base:8,md:12,lg:20},children:[(0,s.jsx)(n.X6q,{as:"h3",mb:"2",children:x("LT0284","Create New Lootex ID")}),(0,s.jsx)(n.xvT,{fontSize:"lg",mb:"8",children:x("LT0260","Enter your @username to sign up.")}),g.isReady&&(0,s.jsxs)("form",{onSubmit:S(V),children:[(0,s.jsxs)(n.NIc,{isRequired:!0,isInvalid:A.email,mb:"8",children:[(0,s.jsx)(n.lXp,{children:x("LT0280","Email")}),(0,s.jsx)(n.IIB,{type:"text",placeholder:x("LT0085","Enter your email"),value:R,isReadOnly:!0,isDisabled:!0}),(0,s.jsx)(n.J1D,{children:h(null===(e=A.email)||void 0===e?void 0:e.message)})]}),(0,s.jsxs)(n.NIc,{isRequired:!0,isInvalid:A.username,mb:"8",children:[(0,s.jsx)(n.lXp,{children:x("LT0309","Username")}),(0,s.jsx)(n.IIB,{autoFocus:!0,type:"text",placeholder:x("LT0367","Enter your username"),...O,onChange:Z}),(0,s.jsx)(n.J1D,{children:h(null===(r=A.username)||void 0===r?void 0:r.message)})]}),(0,s.jsxs)(n.Akm,{mb:"4",startingHeight:1,initialIsExpanded:!!(null===(i=g.query)||void 0===i?void 0:i.referral),children:[(0,s.jsx)(n.pKi,{children:x("RF0016","Referral Code (Option)")}),(0,s.jsx)(n.NIc,{isInvalid:A.referralCode,my:"3",children:(0,s.jsxs)(n.Mn$,{children:[(0,s.jsx)(n.IIB,{mt:"1",type:"text",...B,onChange:X}),(0,s.jsx)(n.J1D,{children:h(null===(o=A.referralCode)||void 0===o?void 0:o.message)})]})})]}),(0,s.jsxs)(n.gCW,{alignItems:"flex-start",spacing:4,children:[(0,s.jsx)(n.XZJ,{...E("agreeTerms"),children:(0,s.jsxs)(n.xvT,{fontSize:"sm",children:[x("LT0445","I have read and agree to Lootex's"),(0,s.jsx)(l.Qj,{href:"/terms",variant:"link",size:"sm",colorScheme:"mono",target:"_blank",children:x("LT0229","Terms of Service")}),x("LT0231","and")," ",(0,s.jsx)(l.Qj,{href:"/privacy",variant:"link",size:"sm",colorScheme:"mono",target:"_blank",children:x("LT0431","Privacy Policy")}),"."]})}),(0,s.jsx)(T.eG,{ref:c,onChange:J}),(0,s.jsx)(n.zxk,{type:"submit",size:"lg",colorScheme:"primary",isDisabled:!G,isLoading:Y,children:x("LT0239","Sign Up")})]})]}),(0,s.jsx)(t.OM,{isOpen:Y,title:"Creating Your Lootex ID..."})]})};var M=F;let O=()=>{var e,r,i,t;let{ref:o,reset:c}=(0,T.Z1)(),{formatYupErrorMessage:u,t:h}=(0,a.YB)(),x=(0,d.useRouter)(),{toast:g}=(0,n.lmA)(),f=(0,v.Ry)({email:(0,v.Z_)().email(),username:(0,v.Z_)().sequence([()=>(0,v.Z_)().label(h("LT0309","Username")).required().min(3).max(16),()=>(0,v.Z_)().matches(/^([a-z])/,h("LT0646","First character must be a lowercase letter(a-z)")),()=>(0,v.Z_)().matches(/^[a-z0-9_]+$/,h("LT0647","Username can only contains lowercase letters(a-z), numbers(0-9) and underscore(_)")),()=>(0,v.Z_)().availableUsername(h("LT0648","This username has already been registered"))]),referralCode:(0,v.Z_)().referralCode(h("LT0649","Invalid referral code")),agreeTerms:(0,v.O7)().required().oneOf([!0],h("LT0650","The terms and conditions must be accepted")),recaptcha:(0,v.Z_)().required()}).required(),{handleSubmit:L,formState:{errors:b},register:y,setValue:C,watch:I}=(0,j.cI)({resolver:(0,p.X)(f),mode:"onChange",defaultValues:{username:"",email:""}}),w=I("email"),S=I("username"),k=I("recaptcha"),E=I("referralCode"),q=y("username"),W=y("referralCode"),z=(0,_.Z)(q.onChange),A=(0,_.Z)(W.onChange),{sendOtp:R,isLoading:P}=(0,D.pi)({email:w,recaptchaToken:k,onSuccess:()=>{x.push({pathname:"/account/create-new-id-otp",query:{email:w,username:S,referral:E,lastSent:Date.now()}})},onError:e=>{console.error(e.message),c(),g({status:"error",title:h("LT0634","Failed to send OTP code. Please try again later.")})}}),U=async()=>{R()},F=e=>{C("recaptcha",e)};return(0,m.useEffect)(()=>{if(!x.isReady)return;let{email:e,username:r,referral:i}=x.query;e&&C("email",e),r&&C("username",r),i&&C("referralCode",i)},[x.query,x.isReady,C]),(0,s.jsxs)(n.W20,{maxWidth:"https://lootex.io/_next/static/chunks/container.md",py:{base:8,md:12,lg:20},children:[(0,s.jsx)(n.X6q,{as:"h3",mb:"2",children:h("LT0284","Create New Lootex ID")}),(0,s.jsx)(n.xvT,{fontSize:"lg",mb:"8",children:h("LT0296","Enter your @username & the digit code sent to your email to sign up.")}),x.isReady&&(0,s.jsxs)("form",{onSubmit:L(U),children:[(0,s.jsxs)(n.NIc,{isRequired:!0,isInvalid:b.email,mb:"8",children:[(0,s.jsx)(n.lXp,{children:h("LT0280","Email")}),(0,s.jsx)(n.IIB,{type:"text",placeholder:h("LT0350","Enter your email"),value:w,isReadOnly:!0,isDisabled:!0}),(0,s.jsx)(n.J1D,{children:u(null===(e=b.email)||void 0===e?void 0:e.message)})]}),(0,s.jsxs)(n.NIc,{isRequired:!0,isInvalid:b.username,mb:"8",children:[(0,s.jsx)(n.lXp,{children:h("LT0309","Username")}),(0,s.jsx)(n.IIB,{autoFocus:!0,type:"text",placeholder:h("LT0367","Enter your username"),...q,onChange:z}),(0,s.jsx)(n.J1D,{children:u(null===(r=b.username)||void 0===r?void 0:r.message)})]}),(0,s.jsxs)(n.Akm,{mb:"4",startingHeight:1,initialIsExpanded:!!(null===(i=x.query)||void 0===i?void 0:i.referral),children:[(0,s.jsx)(n.pKi,{children:h("RF0016","Referral Code (Option)")}),(0,s.jsx)(n.NIc,{isInvalid:b.referralCode,my:"3",children:(0,s.jsxs)(n.Mn$,{children:[(0,s.jsx)(n.IIB,{mt:"1",type:"text",...W,onChange:A}),(0,s.jsx)(n.J1D,{children:u(null===(t=b.referralCode)||void 0===t?void 0:t.message)})]})})]}),(0,s.jsxs)(n.gCW,{alignItems:"flex-start",spacing:4,children:[(0,s.jsx)(n.XZJ,{...y("agreeTerms"),children:(0,s.jsxs)(n.xvT,{fontSize:"sm",children:[h("LT0445","I have read and agree to Lootex's")," ",(0,s.jsx)(l.Qj,{href:"/terms",variant:"link",size:"sm",colorScheme:"mono",target:"_blank",children:h("LT0229","Terms of Service")})," ",h("LT0231","and")," ",(0,s.jsx)(l.Qj,{href:"/privacy",variant:"link",size:"sm",colorScheme:"mono",target:"_blank",children:h("LT0431","Privacy Policy")}),"."]})}),(0,s.jsx)(T.eG,{onChange:F,ref:o}),(0,s.jsx)(n.zxk,{type:"submit",size:"lg",colorScheme:"primary",isDisabled:!(w&&S&&k),isLoading:P,children:h("LT0385","Continue")})]})]})]})};var B=O;let Z=()=>{var e;let{formatYupErrorMessage:r,t:i}=(0,a.YB)(),l=(0,d.useRouter)(),{address:o}=(0,W.mA)(),{setSignedIn:c,refetchAccount:u}=(0,D.aC)(),{toast:h}=(0,n.lmA)(),{errorPopup:x}=(0,T.Ol)(),[g,f]=(0,m.useState)(),L=(0,v.Ry)({email:(0,v.Z_)().email(),username:(0,v.Z_)(),code:(0,v.Z_)().matches(/^[0-9]{6}$/,i("LT0642","6-Digit Code is wrong"))}).required(),{handleSubmit:b,formState:{errors:y,isValid:C},register:I,setValue:w,watch:S}=(0,j.cI)({resolver:(0,p.X)(L),defaultValues:{email:"",username:"",code:"",referralCode:""}}),k=S("email"),E=S("username"),q=S("code"),z=S("referralCode"),{sendOtp:A,isLoading:R}=(0,D.pi)({email:k,onSuccess:()=>{f(Date.now()),h({status:"success",title:i("LT0633","OTP sent!")})},onError:()=>{h({status:"error",title:i("LT0634","Failed to send OTP code. Please try again later.")})}}),{signUp:P,isLoading:U}=(0,D.QS)({address:o,chainFamily:"ETH",username:E,email:k,referralCode:z,otpCode:q,onSuccess:()=>{c(!0),u();let e=l.query.redirect;e?l.push(e):l.push("/")},onError:e=>{x(e)}}),_=()=>{P()};(0,m.useEffect)(()=>{if(!l.isReady)return;let{email:e,username:r,referral:i}=l.query;e&&w("email",e),r&&w("username",r),i&&w("referralCode",i)},[l.query,l.isReady,w]);let F=(0,m.useRef)(),[M,O]=(0,m.useState)();return(0,m.useEffect)(()=>{l.query.lastSent&&f(Number(l.query.lastSent))},[l.query.lastSent]),(0,m.useEffect)(()=>{let e=g+12e4-Date.now();return e>0&&(O(Math.floor(e/1e3)),F.current=setInterval(()=>{O(e=>e-1>0?e-1:(clearInterval(F.current),0))},1e3)),()=>clearInterval(F.current)},[g]),(0,s.jsxs)(n.W20,{maxWidth:"https://lootex.io/_next/static/chunks/container.md",py:{base:8,md:12,lg:20},children:[(0,s.jsx)(n.X6q,{as:"h3",mb:"2",children:i("LT0546","Check your email!")}),(0,s.jsx)(n.xvT,{fontSize:"lg",mb:"8",children:i("LT0547","Please enter the 6-digit code sent to your email.")}),l.isReady&&(0,s.jsxs)("form",{onSubmit:b(_),children:[(0,s.jsxs)(n.gCW,{spacing:"2",mb:"2",children:[(0,s.jsx)(n.Ugi,{w:"full",children:(0,s.jsxs)(n.NIc,{isRequired:!0,isInvalid:y.code,children:[(0,s.jsx)(n.lXp,{children:i("LT0446","6-Digit Code")}),(0,s.jsxs)(n.kCb,{columnGap:"2",children:[(0,s.jsx)(n.IIB,{type:"text",placeholder:i("LT0437","Enter your OTP code"),...I("code")}),(0,s.jsx)(n.zxk,{colorScheme:"mono",alignSelf:"flex-end",type:"button",onClick:A,isDisabled:M>0,isLoading:R,children:i("LT0286","Resend")})]}),(0,s.jsx)(n.J1D,{children:r(null===(e=y.code)||void 0===e?void 0:e.message)})]})}),(0,s.jsx)(n.xvT,{fontSize:"sm",alignSelf:"flex-end",visibility:M>0?"visible":"hidden",children:i({id:"LT0241",defaultMessage:"Resend in {sec} seconds"},{sec:M})})]}),(0,s.jsx)(n.zxk,{type:"submit",size:"lg",colorScheme:"primary",isDisabled:!C,isLoading:U,children:i("LT0239","Sign Up")})]}),(0,s.jsx)(t.OM,{isOpen:U,title:"Creating Your Lootex ID..."})]})};var X=Z,N=i(27650);let Y=e=>{let{address:r,isMainWallet:i}=e,{t}=(0,a.YB)(),{onCopy:o}=(0,T.VP)(r,t("LT0161","Address"));return(0,s.jsxs)(n.Ugi,{spacing:"4",children:[(0,s.jsx)(l.qE,{size:"xl",variant:"wallet",name:r}),(0,s.jsxs)(n.kCb,{w:"full",direction:{base:"column",lg:"row"},align:{base:"start",lg:"center"},justify:"space-between",gap:"2",children:[(0,s.jsxs)(n.Ugi,{spacing:"1",children:[(0,s.jsx)(n.xvT,{fontWeight:"semibold",color:"text.primary",children:(0,N.Z)(r,6,6)}),(0,s.jsx)(n.hU,{size:"xs",variant:"ghost","aria-label":"Copy address",icon:(0,s.jsx)(n.PJP.Copy,{boxSize:"1rem",color:"https://lootex.io/_next/static/chunks/neutral.400"}),onClick:o})]}),i&&(0,s.jsx)(n.Vp9,{colorScheme:"green",children:t("LT0728","Account Main Wallet")})]})]})},J=e=>{let{wallets:r=[]}=e,{t:i}=(0,a.YB)(),{address:l}=(0,W.mA)(),t=null==r?void 0:r.find(e=>e.address.toLowerCase()===l.toLowerCase()),o=null==r?void 0:r.filter(e=>e.address.toLowerCase()!==l.toLowerCase());return(0,s.jsxs)(n.gCW,{align:"start",spacing:"4",children:[(0,s.jsx)(n.xuv,{w:"full",p:"4",borderRadius:"2xl",bgColor:"background.secondary",children:(0,s.jsx)(Y,{...t})}),(0,s.jsx)(n.izJ,{}),null==o?void 0:o.map(e=>(0,s.jsx)(n.xuv,{w:"full",p:"4",borderRadius:"2xl",bgColor:"background.secondary",children:(0,s.jsx)(Y,{...e})},e.address)),(0,s.jsx)(n.xvT,{children:i("LT0727","If you wish to add a new wallet, simply log in again with a new wallet using the wallet provider's procedure.")})]})},V=e=>null==e?void 0:e.filter(e=>"twitter"!==e.name&&"discord"!==e.name),G=e=>{let{children:r}=e,[i,n]=(0,m.useState)(),{account:a}=(0,D.aC)();return(0,m.useEffect)(()=>{a&&n({name:a.fullname||"",description:a.introduction||"",socialLinks:Array.isArray(a.externalLinks)&&a.externalLinks.length>0?V(a.externalLinks):V(h.KT),profileImage:a.avatarUrl||""})},[a]),i?r({defaultValues:i}):(0,s.jsx)(t.gb,{})},Q=e=>{var r,i,t;let{defaultValues:o}=e,[c,d]=(0,m.useState)(null),{account:u,refetchAccount:h}=(0,D.aC)(),{formatYupErrorMessage:x,t:g}=(0,a.YB)(),{toast:f}=(0,n.lmA)(),T=(0,v.Ry)({name:(0,v.Z_)().required(),description:(0,v.Z_)().max(1e3),socialLinks:(0,v.IX)().of((0,v.Ry)().shape({url:(0,v.Z_)().url()}))}).required(),{register:y,handleSubmit:C,formState:{errors:I,isValid:w},control:S,setValue:k,watch:E}=(0,j.cI)({resolver:(0,p.X)(T),defaultValues:o,mode:"onBlur",reValidateMode:"onBlur"}),{fields:q}=(0,j.Dq)({name:"socialLinks",control:S}),W=e=>{let r=I.socialLinks&&I.socialLinks[e];return null==r?void 0:r.url.message},z=E("name"),A=E("description"),R=E("profileImage"),P=E("socialLinks"),{mutate:U,data:_,isLoading:F}=(0,L.D)(()=>(0,b._p)(c),{onSuccess:e=>{k("profileImage",e.url)}}),{mutate:M,isLoading:O}=(0,L.D)(()=>(0,b.ck)({avatarUrl:(null==_?void 0:_.url)||(null==u?void 0:u.avatarUrl),fullname:z,introduction:A,externalLinks:P}),{onSuccess:()=>{h(),f({status:"success",title:g("LT0635","Profile successfully updated")})},onError:()=>{f({status:"error",title:g("LT0632","Failed to update. Please try again later.")})}}),B=e=>{d(e[0])};return(0,m.useEffect)(()=>{y("profileImage",{required:!0})},[y,u.avatarUrl]),(0,m.useEffect)(()=>{c&&U()},[c,U]),(0,s.jsxs)("form",{onSubmit:C(M),noValidate:!0,children:[(0,s.jsxs)(n.gCW,{spacing:"8",mb:"8",children:[(0,s.jsx)(l.Wi,{label:g("LT0426","Profile Image"),helperText:g("LT0428","This image will also be used for navigation. 320 x 320 recommended."),isInvalid:I.image,errorMessage:x(null===(r=I.image)||void 0===r?void 0:r.message),isRequired:!0,children:(0,s.jsx)(l.bA,{ratio:1,maxW:"https://lootex.io/_next/static/chunks/11.25em",borderRadius:"50%",alt:"profile image",src:(null==_?void 0:_.url)||(null==u?void 0:u.avatarUrl)||"",name:"image",dropzoneOptions:{multiple:!1},isLoading:F,inputProps:{...y("image")},onChange:B})}),(0,s.jsx)(l.Wi,{label:g("LT0285","Name"),isInvalid:I.name,errorMessage:x(null===(i=I.name)||void 0===i?void 0:i.message,{path:g("LT0285","Name")}),isRequired:!0,children:(0,s.jsx)(n.IIB,{type:"text",placeholder:"Enter your name",...y("name")})}),(0,s.jsx)(l.Wi,{label:g("LT0037","Description"),helperText:g({id:"LT0652",defaultMessage:"{word_amount} of {max} characters used"},{word_amount:A.length,max:1e3}),isInvalid:I.description,errorMessage:x(null===(t=I.description)||void 0===t?void 0:t.message,{path:g("LT0037","Description")}),children:(0,s.jsx)(n.gxH,{...y("description")})}),(0,s.jsxs)(n.gCW,{w:"full",align:"start",spacing:"4",children:[(0,s.jsx)(n.lXp,{mx:"0",children:g("LT0406","Links")}),q.map((e,r)=>(0,s.jsx)(l.XI,{name:"socialLinks[".concat(r,"https://lootex.io/_next/static/chunks/].name"),iconName:e.iconName,placeholder:e.placeholder,isInvalid:W(r),errorMessage:x(W(r),{path:g("LT0654","Link")}),...y("socialLinks[".concat(r,"https://lootex.io/_next/static/chunks/].url"))},e.id))]})]}),(0,s.jsx)(n.zxk,{w:{base:"full",md:"initial"},size:"lg",type:"submit",colorScheme:"primary",alignSelf:{md:"start"},isDisabled:!(w&&R),isLoading:O,children:g("LT0228","Save Changes")})]})},H=()=>(0,s.jsx)(G,{children:e=>(0,s.jsx)(Q,{...e})});var K=i(23848);let $=e=>{let{type:r,name:i,iconName:t="Help",avatarUrl:o,isConnected:c,onUpdateConnection:u,isLoading:h}=e,{t:x}=(0,a.YB)(),{popup:g}=(0,n.lmA)(),p=(0,d.useRouter)(),f=(0,L.D)({mutationFn:()=>(0,b.$9)(r),onSuccess:()=>{(0,K.signOut)({redirect:!1}),u()}}),j=e=>{g({title:x({id:"LT0528",description:"Are you sure you want to disconnect your {Social} account?"},{Social:e}),actions:[{children:x("LT0433","Cancel"),colorScheme:"mono",onClick:()=>{}},{children:x("LT0271","Disconnect"),colorScheme:"primary",onClick:()=>f.mutate()}]})},v=e=>{let r=window.open(e,e,"width=400,height=640,top=100,left=100");null==r||r.focus()};return(0,s.jsxs)(n.kCb,{p:{base:3,md:4},borderWidth:"1px",borderRadius:"2xl",borderColor:"border.primary",alignItems:"center",gap:"2",children:[(0,s.jsxs)(n.Ugi,{spacing:"0",flex:"1",children:[(0,s.jsx)(n.M5Y,{mr:{base:2,md:4},w:"40px",h:"40px",children:c?(0,s.jsx)(l.qE,{src:o}):(0,m.createElement)(n.PJP[t],{boxSize:"2rem"})}),(0,s.jsxs)(n.gCW,{flex:"1",alignItems:"flex-start",spacing:"0",children:[(0,s.jsx)(n.xvT,{fontWeight:"bold",color:"text.primary",children:i}),(0,s.jsx)(n.OdW,{isLoaded:!h,children:(0,s.jsx)(n.xvT,{fontSize:"sm",children:c?x({id:"LT0527",defaultMessage:"{Social} account is connected"},{Social:i}):x({id:"LT0526",defaultMessage:"Please connect your {social} account."},{social:i})})})]})]}),!h&&(c?(0,s.jsx)(n.zxk,{flexShrink:"0",variant:"outline",onClick:()=>j(i),isLoading:f.isLoading,size:{base:"sm",md:"lg"},children:x("LT0271","Disconnect")}):(0,s.jsx)(n.zxk,{flexShrink:"0",colorScheme:"primary",onClick:()=>"twitter"===r?p.push("/api/auth-twitter?redirectUri=".concat(p.locale).concat(p.asPath)):v("/next-auth/".concat(r)),size:{base:"sm",md:"lg"},children:x("LT0525","Connect")}))||(0,s.jsx)(n.$jN,{})]})},ee=[{type:"twitter",name:"Twitter",iconName:"Twitter2",avatarUrl:"",isConnected:!1},{type:"discord",name:"Discord",iconName:"Discord2",avatarUrl:"",isConnected:!1},{type:"steam",name:"Steam",iconName:"Steam",avatarUrl:"",isConnected:!1}],er=()=>{var e;let{data:r}=(0,K.useSession)(),{account:i={},refetchAccount:a,isLoading:l}=(0,D.aC)(),t=null!==(e=i.AccountSocialTokens)&&void 0!==e?e:[];return(0,m.useEffect)(()=>{(null==i?void 0:i.username)&&a()},[null==r?void 0:r.provider]),(0,s.jsx)(n.gCW,{align:"stretch",spacing:"4",children:ee.map(e=>{let r=t.find(r=>{let{provider:i}=r;return i===e.type});return{...e,isConnected:!!r,avatarUrl:r?null==r?void 0:r.picture:""}}).map((e,r)=>(0,s.jsx)($,{isLoading:l,onUpdateConnection:()=>{a()},...e},r))})},ei=e=>{let{title:r,children:i}=e;return(0,s.jsxs)(n.x45,{pt:{md:0},children:[(0,s.jsx)(n.xvT,{fontWeight:"semibold",color:"text.primary",mb:"4",children:r}),i]})},es=e=>{var r;let{account:i}=e,l=(0,T.dD)(),{t}=(0,a.YB)(),o=(0,T.wX)(["profile","wallets","social-accounts"]),c=[{label:t("LT0287","Profile Settings"),title:t("LT0287","Profile Settings")},{label:t("LT0530","Connected Wallets"),title:t("LT0726","Current Wallet")},{label:t("LT0524","Social Accounts"),title:t("LT0524","Social Accounts")}];return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(T.HJ,{title:null===(r=c[null==o?void 0:o.index])||void 0===r?void 0:r.label}),(0,s.jsxs)(n.W20,{maxW:"https://lootex.io/_next/static/chunks/container.xl",px:{base:"4",md:"8"},m:"0 auto",mt:{base:"4",md:"12"},children:[(0,s.jsx)(n.X6q,{as:"h2",mb:{base:"6",md:"8"},children:t("LT0374","Settings")}),(0,s.jsxs)(n.mQc,{w:"full",variant:{base:"line",md:"solid-rectangle"},orientation:l?"horizontal":"vertical",gap:{md:"16"},...o,children:[(0,s.jsx)(n.tdY,{overflowX:"auto",pb:{base:"2px",md:"0"},children:c.map(e=>(0,s.jsx)(n.OK9,{minW:{md:"https://lootex.io/_next/static/chunks/18.75em"},justifyContent:{md:"flex-start"},whiteSpace:{base:"nowrap",md:"normal"},children:e.label},e))}),(0,s.jsxs)(n.nPR,{flex:"1",children:[(0,s.jsx)(ei,{title:c[0].title,children:(0,s.jsx)(H,{})}),(0,s.jsx)(ei,{title:c[1].title,children:(0,s.jsx)(J,{wallets:null==i?void 0:i.wallets})}),(0,s.jsx)(ei,{title:c[2].title,children:(0,s.jsx)(er,{})})]})]})]})]})};var en=es,ea=i(46353);let el=e=>{let{isModal:r}=e,{setSignedIn:i,isInitializing:l,signedIn:o,refetchAccount:c}=(0,D.aC)(),u=(0,m.useRef)("Metamask"),h=(0,d.useRouter)(),{errorPopup:x}=(0,T.Ol)(),{t:g}=(0,a.YB)(),{popup:p}=(0,n.lmA)(),{onClose:f}=(0,t.S4)(),{signIn:j,isLoading:v}=(0,D.zq)({onSuccess:e=>{if("unregistered"===e&&(h.push({pathname:"/account/ask-email",query:r?{redirect:h.asPath}:h.query}),r)){f();return}if("success"===e){if(i(!0),c(),r){f();return}let e=h.query.redirect;e&&!e.includes("/account/sign-in")?h.push(e):h.push("/")}},onError:e=>{x(e)}}),{signInTorus:L,isLoading:b}=(0,D.CB)({onSuccess:e=>{if("unregistered"===e&&(h.push({pathname:"/account/create-new-id-torus",query:r?{redirect:h.asPath}:h.query}),r)){f();return}if("success"===e){if(i(!0),c(),r){f();return}let e=h.query.redirect;e&&!e.includes("/account/sign-in")?h.push(e):h.push("/")}},onError:e=>{x(e)}}),y=e=>{u.current=e.icon,j({...e})},C=e=>{let{icon:r,connectorId:i}=e;!function(){let e=new ea.UAParser(navigator.userAgent),r=e.getBrowser().name;return!["Line","WeChat","Instagram","Facebook","TikTok","Twitter"].includes(r)&&("Webkit"!==r&&"WebKit"!==r||"mobile"!==e.getDevice().type)}()?p({status:"warning",title:g("LT0565","Attention!"),description:(0,s.jsx)(n.xvT,{as:n.UGj,children:g("LT0566","The social software browser you are currently using may cause registration failure. Please switch to **Google Chrome** or **Safari** for the best experience.")}),actions:[{children:g("LT0094","Ok"),onClick:()=>{},colorScheme:"primary"}]}):(u.current=r,L({connectorId:i}))},I=[{icon:"Google2",description:g("LT0454","Connect with Google account"),onClick:()=>{C({connectorId:"web3auth-google",icon:"Google2"})}},{icon:"Facebook2",description:g("LT0455","Connect with Facebook account"),onClick:()=>{C({connectorId:"web3auth-facebook",icon:"Facebook2"})}},{icon:"Discord2",description:g("LT0456","Connect with Discord account"),onClick:()=>{C({connectorId:"web3auth-discord",icon:"Discord2"})}}];(0,m.useEffect)(()=>{if(!l&&o&&!r){let e=h.query.redirect;e&&!e.includes("/account/sign-in")?h.push(e):h.push("/")}},[l,h,o,r]);let w=Boolean(window.ethereum);return(0,s.jsxs)(n.W20,{maxWidth:"https://lootex.io/_next/static/chunks/container.sm",py:"8",px:r?0:4,children:[(0,m.createElement)(r?n.kCb:m.Fragment,r?{flexDirection:"column",alignItems:"center"}:{},(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.X6q,{as:"h2",size:r?"xl":"2xl",children:g("LT0390","Sign In")}),(0,s.jsx)(n.xvT,{children:g("LT0347","Select a Wallet for your Lootex ID")})]})),(0,s.jsxs)(n.gCW,{alignItems:"stretch",spacing:"1",mt:"8",children:[(0,s.jsx)(n.xvT,{fontSize:"xs",children:g("LT0451","Most popular select")}),(0,s.jsx)(n.AfN,{leftIcon:(0,s.jsx)(n.PJP.Metamask,{}),onClick:()=>{w?y({icon:"Metamask",connectorId:"injected"}):window.open("https://metamask.app.link/dapp/".concat(null==window?void 0:window.location.host),"_blank").focus()},children:g("LT0453","Metamask - Most popular decentralized wallet")}),(0,s.jsx)(n.xvT,{fontSize:"xs",pt:"3",children:g("LT0452","Quick login by your social account. (Powered by Torus)")}),(0,s.jsx)(n.gCW,{alignItems:"stretch",spacing:"2",children:I.map((e,r)=>{let{icon:i,description:a,onClick:l}=e;return(0,s.jsx)(n.AfN,{leftIcon:(0,m.createElement)(n.PJP[i]),onClick:l,children:a},r)})}),(0,s.jsx)(n.xvT,{fontSize:"xs",pt:"3",children:g("LT0369","Others")}),(0,s.jsxs)(n.gCW,{alignItems:"stretch",spacing:"2",children:[(0,s.jsx)(n.AfN,{leftIcon:(0,s.jsx)(n.PJP.WalletConnect,{}),onClick:()=>{y({connectorId:"walletConnect",icon:"WalletConnect"})},children:"WalletConnect"}),(0,s.jsx)(n.AfN,{leftIcon:(0,s.jsx)(n.PJP.Coinbase,{}),disabled:!0,children:"Coinbase (Coming soon)"})]})]}),(0,s.jsx)(t.OM,{isOpen:v||b,onClose:()=>{},title:g("LT0626","Connecting your wallet"),description:g("LT0627","Please confirm connection on your wallet."),LoaderIcon:n.PJP[u.current],type:"modal"})]})};var et=el;let eo=()=>{var e;(0,D.SX)();let{formatYupErrorMessage:r,t:i}=(0,a.YB)(),{ref:l,reset:o}=T.Z1,[c,u]=(0,m.useState)(),[h,x]=(0,m.useState)(),g=(0,d.useRouter)(),{query:f}=g,{address:L}=(0,W.mA)(),{setSignedIn:b,refetchAccount:y}=(0,D.aC)(),{toast:C}=(0,n.lmA)(),{errorPopup:I}=(0,T.Ol)(),w=(0,v.Ry)({code:(0,v.Z_)().matches(/^[0-9]{6}$/,i("LT0642","6-Digit Code is wrong")).required()}).required(),{handleSubmit:S,formState:{errors:k,isValid:E},register:q,watch:z}=(0,j.cI)({resolver:(0,p.X)(w)}),A=f.email,R=z("code"),{sendOtp:P}=(0,D.pi)({email:A,recaptchaToken:c,onSuccess:()=>{x(Date.now())},onError:e=>{console.error(e.message),o(),C({status:"error",title:i("LT0634","Failed to send OTP code. Please try again later.")})}}),{newWalletSignIn:U,isLoading:_}=(0,D.mr)({address:L,chainFamily:"ETH",email:A,otpCode:R,onSuccess:e=>{if("success"===e){y(),b(!0);let e=g.query.redirect;e?g.push(e):g.push("/")}},onError:e=>{I(e)}}),F=()=>{U()},M=(0,m.useRef)(),[O,B]=(0,m.useState)();return(0,m.useEffect)(()=>{g.query.lastSent&&x(Number(g.query.lastSent))},[g.query.lastSent]),(0,m.useEffect)(()=>{let e=h+12e4-Date.now();return e>0&&(B(Math.floor(e/1e3)),M.current=setInterval(()=>{B(e=>e-1>0?e-1:(clearInterval(M.current),0))},1e3)),()=>clearInterval(M.current)},[h]),(0,s.jsxs)(n.W20,{maxWidth:"https://lootex.io/_next/static/chunks/container.md",py:{base:8,md:12,lg:20},children:[(0,s.jsx)(n.X6q,{as:"h3",mb:"2",children:i("LT0299","Verify Your Email")}),(0,s.jsx)(n.xvT,{fontSize:"lg",mb:"8",children:i("LT0378","Click to get an OTP code. Enter the code to pair with this wallet.")}),(0,s.jsxs)("form",{onSubmit:S(F),children:[(0,s.jsxs)(n.gCW,{spacing:"2",mb:"8",alignItems:"flex-start",children:[(0,s.jsx)(T.eG,{onChange:u,ref:l}),c&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.Ugi,{w:"full",children:[(0,s.jsxs)(n.NIc,{isInvalid:k.code,isRequired:!0,children:[(0,s.jsx)(n.lXp,{children:i("LT0446","6-Digit Code")}),(0,s.jsx)(n.IIB,{type:"text",placeholder:i("LT0437","Enter your OTP code"),...q("code")}),(0,s.jsx)(n.J1D,{children:r(null===(e=k.code)||void 0===e?void 0:e.message)})]}),(0,s.jsx)(n.zxk,{colorScheme:"mono",alignSelf:"flex-end",type:"button",onClick:P,isDisabled:O>0,isLoading:_,children:h?i("LT0286","Resend"):i("LT0283","Get OTP")})]}),(0,s.jsx)(n.xvT,{fontSize:"sm",alignSelf:"flex-end",visibility:O>0?"visible":"hidden",children:i({id:"LT0241",defaultMessage:"Resend in {sec} seconds"},{sec:O})})]})]}),(0,s.jsx)(n.zxk,{type:"submit",size:"lg",colorScheme:"primary",isDisabled:!(E&&c),isLoading:_,children:i("LT0373","Bind")})]}),(0,s.jsx)(t.OM,{isOpen:_,title:i("LT0657","Binding a new wallet to your existing Lootex ID...")})]})};var ec=eo}}]);